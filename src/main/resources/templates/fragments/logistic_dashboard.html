<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Fragment: Logistic Dashboard</title>
</head>

<body>
    <div th:fragment="logistic_dashboard(transaction_status, readonly)">
        <table class="w-full">
            <thead>
                <tr>
                    <th>ID da transação</th>
                    <th>Data da transação</th>
                    <th th:if="${readonly == false}">Aprovar</th>
                </tr>
            </thead>

            <tbody>
                <tr th:each="transaction : ${transactions}">
                    <td th:id="'transaction-' + ${transaction.id}" th:text="${transaction.id}"></td>
                    <td th:id="'transaction-' + ${transaction.purchaseDate}" th:text="${transaction.purchaseDate}">
                    </td>

                    <!-- Botão de aprovar cria um pop-up para a própria página -->
                    <td th:if="${readonly == false}">
                        <form th:action="@{/admin/logistic}" method="post"
                            onsubmit="return confirm('Tem certeza que deseja aprovar esta transação?')">
                            <input type="hidden" name="_method" value="delete" />
                            <button th:id="'approve-' + ${transaction.id}" type="submit" class="btn btn-danger"
                                style="display: inline-flex; align-items: center">Aprovar
                            </button>
                        </form>
                        <form th:action="@{/admin/logistic}" method="post"
                            onsubmit="return confirm('Tem certeza que deseja reprovar esta transação?')">
                            <input type="hidden" name="_method" value="delete" />
                            <button th:id="'reprove-' + ${transaction.id}" type="submit" class="btn btn-danger"
                                style="display: inline-flex; align-items: center">Reprovar
                            </button>
                        </form>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</body>

</html>